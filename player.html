<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Cutscene</title>
    <style>
        html,
        body {
            margin: 0;
            height: 100%;
            background: #000;
            overflow: hidden;
        }

        video {
            width: 100vw;
            height: 100vh;
            object-fit: contain;
            background: #000;
        }

        #msg {
            position: fixed;
            left: 0;
            top: 0;
            right: 0;
            bottom: 0;
            display: flex;
            align-items: center;
            justify-content: center;
            color: #fff;
            font: 16px Arial;
            padding: 20px;
            text-align: center;
            background: #000;
        }
    </style>
</head>

<body>
    <div id="msg" style="display:none;"></div>
    <video id="v" controls autoplay muted playsinline preload="auto"></video>

    <script>
        (function () {
            var v = document.getElementById('v');
            var msg = document.getElementById('msg');

            function getQueryParam(name) {
                // parser simples ES5
                var q = window.location.search.substring(1); // sem '?'
                if (!q) return null;
                var parts = q.split('&');
                for (var i = 0; i < parts.length; i++) {
                    var kv = parts[i].split('=');
                    if (decodeURIComponent(kv[0] || '') === name) {
                        return decodeURIComponent(kv[1] || '');
                    }
                }
                return null;
            }

            var src = getQueryParam('v');

            // fallback se não passar parâmetro
            if (!src) src = 'videos/001.mp4';

            // tenta carregar
            v.src = src;

            // tenta tocar (muted ajuda a permitir autoplay)
            try { v.play(); } catch (e) { }

            // 1 clique destrava áudio (se permitido)
            function unlock() {
                v.muted = false;
                try { v.play(); } catch (e) { }
                window.removeEventListener('mousedown', unlock);
                window.removeEventListener('touchstart', unlock);
                window.removeEventListener('keydown', unlock);
            }
            window.addEventListener('mousedown', unlock);
            window.addEventListener('touchstart', unlock);
            window.addEventListener('keydown', unlock);

            // se der erro ao carregar o vídeo
            v.addEventListener('error', function () {
                msg.style.display = 'flex';
                msg.innerHTML = 'Não consegui carregar o vídeo.<br><br>' +
                    'URL: ' + src + '<br><br>' +
                    'Teste abrir diretamente: <br>' +
                    '<b>' + (location.origin + '/' + src) + '</b>';
            });
        })();
    </script>
</body>

</html>